<?xml version="1.0" encoding="utf-8" ?>
<ActivityIndicator xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Ifpa.Controls.IsBusyAndLoadedActivityIndicator"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit">
    <ActivityIndicator.Resources>
        <toolkit:InvertedBoolConverter x:Key="invertedBoolConverter" />
        <toolkit:VariableMultiValueConverter 
                x:Key="VariableMultiValueConverter"
                ConditionType="Any" />
    </ActivityIndicator.Resources>
    <ActivityIndicator.IsVisible>
        <MultiBinding Converter="{StaticResource VariableMultiValueConverter}">
            <Binding Path="IsBusy" />
            <Binding Path="IsLoaded" Converter="{StaticResource invertedBoolConverter}" />
        </MultiBinding>
    </ActivityIndicator.IsVisible>
    <ActivityIndicator.IsRunning>
        <MultiBinding Converter="{StaticResource VariableMultiValueConverter}">
            <Binding Path="IsBusy" />
            <Binding Path="IsLoaded" Converter="{StaticResource invertedBoolConverter}" />
        </MultiBinding>
    </ActivityIndicator.IsRunning>
</ActivityIndicator>